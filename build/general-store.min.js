!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.GeneralStore=t():e.GeneralStore=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.define=n(16);var i=n(14),o=(r(i),n(6)),s=r(o),u=n(9),a=r(u),c=s.default;t.DispatcherInstance=c;var f=a.default;t.StoreDependencyMixin=f},function(e,t,n){"use strict";function r(e,t,n,r,i,o,s,u){if(!e){var a;throw a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.")}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return n.hasOwnProperty(e)||(n[e]=t),n[e]}function o(e){return i(l,{},e)}function s(e){return i(p,[],e)}function u(e){return i(h,{},e)}function a(e){return i(y,[],e)}function c(e){return i(_,{},e)}Object.defineProperty(t,"__esModule",{value:!0}),t.dependencies=o,t.handlers=s,t.queue=u,t.stores=a,t.storeFields=c;var f=n(5),d=(r(f),n(3)),l=(r(d),"__StoreDependencyMixin-dependencies"),p="__StoreDependencyMixin-eventHandlers",h="__StoreDependencyMixin-queue",y="__StoreDependencyMixin-stores",_="__StoreDependencyMixin-storeFields"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return null}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=(n(4),n(8)),a=r(u),c=n(5),f=(r(c),n(1)),d=r(f),l=n(7),p=r(l),h="Learn more about using the Store API: https://github.com/HubSpot/general-store#using-the-store-api",y=function(){function e(t,n,r){i(this,e),this._dispatcher=r,this._getter=t,this._responses=n,this._event=new a.default,this._uid=p.default(),this._dispatchToken=this._dispatcher.register(this._handleDispatch.bind(this))}return s(e,[{key:"addOnChange",value:function(e){return d.default("function"==typeof e,'StoreFacade.addOnChange: expected callback to be a function but got "%s" instead. %s',e,h),this._event.addHandler(e)}},{key:"get",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return this._getter.apply(null,t)}},{key:"getDispatcher",value:function(){return this._dispatcher}},{key:"getDispatchToken",value:function(){return this._dispatchToken}},{key:"getID",value:function(){return this._uid}},{key:"_handleDispatch",value:function(e){this._responses.hasOwnProperty(e.actionType)&&(this._responses[e.actionType](e.data,e.actionType,e),this.triggerChange())}},{key:"remove",value:function(){this._dispatcher.unregister(this.getDispatchToken()),this._event.remove(),this._getter=o,this._responses={}}},{key:"triggerChange",value:function(){return this._event.runHandlers(),this}}]),e}();t.default=y,e.exports=t.default},function(e,t){"use strict";function n(e){return"object"==typeof e&&"function"==typeof e.register&&"function"==typeof e.unregister}function r(e){return null!==e&&"object"==typeof e&&"string"==typeof e.actionType}Object.defineProperty(t,"__esModule",{value:!0}),t.isDispatcher=n,t.isPayload=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){n(this,e),this._key=r,this._instance=t}return r(e,[{key:"remove",value:function(){null!==this._instance&&void 0!==this._instance&&(this._instance.removeHandler(this._key),this._instance=null)}}]),e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=n(1),s=r(o),u=null,a={get:function(){return u},set:function(e){s.default(i.isDispatcher(e),'DispatcherInstance.set: Expected dispatcher to be an object with a register method, and an unregister method but got "%s". Learn more about the dispatcher interface: https://github.com/HubSpot/general-store#dispatcher-interface',e),u=e}};t.default=a,e.exports=t.default},function(e,t){"use strict";function n(){return r+i++}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r="uid_",i=0;e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(5),u=r(s),a=n(7),c=r(a),f=function(){function e(){i(this,e),this._handlers={}}return o(e,[{key:"addHandler",value:function(e){var t=c.default();return this._handlers[t]=e,new u.default(this,t)}},{key:"remove",value:function(){return this._handlers={},this}},{key:"removeHandler",value:function(e){return delete this._handlers[e],this}},{key:"_runHandler",value:function(e){this._handlers.hasOwnProperty(e)&&this._handlers[e].call()}},{key:"runHandlers",value:function(){return Object.keys(this._handlers).forEach(this._runHandler.bind(this)),this}}],[{key:"runMultiple",value:function(e){e.forEach(function(e){return e.runHandlers()})}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=(Object.keys(e),!1);return{componentWillMount:function(){t&&u.setupHandlers(this)},componentWillReceiveProps:function(e){t&&f.hasPropsChanged(this.props,e)&&this.setState(c.getDependencyState(this,e,this.state,null))},componentWillUnmount:function(){t&&u.cleanupHandlers(this)},componentDidUpdate:function(e,n){t&&f.hasStateChanged(s.dependencies(this),n,this.state)&&this.setState(c.getDependencyState(this,this.props,this.state,null))},getInitialState:function(){return t=!s.stores(this).length,a.applyDependencies(this,e),c.getDependencyState(this,this.props,this.state,Object.keys(e))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(3),s=(r(o),n(2)),u=n(10),a=n(11),c=n(12),f=n(13);e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=a.dependencies(e),n=a.queue(e),r={};Object.keys(n).forEach(function(i){var o=t[i];r[i]=o.deref(e.props,e.state,o.stores),delete n[i]}),e.setState(r)}function i(e,t){var n=a.stores(e);n.forEach(function(e){var n=e.getDispatcher();e.getID()!==t&&n.isDispatching()&&n.waitFor([e.getDispatchToken()])})}function o(e,t){var n=a.queue(e),o=0===Object.keys(n).length;a.storeFields(e)[t].forEach(function(e){n.hasOwnProperty(e)||(n[e]=!0)}),o&&(i(e,t),r(e))}function s(e){for(var t=a.handlers(e);t.length;)t.pop().remove()}function u(e){var t=a.handlers(e),n=a.stores(e);n.forEach(function(n){t.push(n.addOnChange(o.bind(null,e,n.getID())))})}Object.defineProperty(t,"__esModule",{value:!0}),t.cleanupHandlers=s,t.setupHandlers=u;var a=n(2)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return n[0].get()}function o(e,t){var n=a.dependencies(e),r=a.storeFields(e),o=a.stores(e);Object.keys(t).forEach(function(e){var s,a=t[e];a instanceof f.default?(s=[a],u.default(!n.hasOwnProperty(e),'StoreDependencyMixin: field "%s" is already defined',e),n[e]={deref:i,stores:s}):(s=a.stores,n[e]=a),s.forEach(function(t){var n=t.getID();r.hasOwnProperty(n)||(r[n]=[],o.push(t)),r[n].push(e)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.applyDependencies=o;var s=n(1),u=r(s),a=n(2),c=n(3),f=r(c)},function(e,t,n){"use strict";function r(e,t,n,r){var o=i.dependencies(e);r=r||Object.keys(o);var s={};return r.forEach(function(e){var r=o[e],i=r.deref,u=r.stores;s[e]=i(t,n,u)}),s}Object.defineProperty(t,"__esModule",{value:!0}),t.getDependencyState=r;var i=n(2)},function(e,t,n){"use strict";function r(e,t,n){return u(t[e],n[e])}function i(e,t,n){if(t===n)return!0;var r;for(r in t)if(t.hasOwnProperty(r)&&(!n.hasOwnProperty(r)||!e(r,t,n)))return!1;for(r in n)if(n.hasOwnProperty(r)&&!t.hasOwnProperty(r))return!1;return!0}function o(e,t){return!i(r,e,t)}function s(e,t,n){return!i(function(t,n,r){return e.hasOwnProperty(t)||u(n[t],r[t])},t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.hasPropsChanged=o,t.hasStateChanged=s;var u=n(15)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return null}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),a=r(u),c=n(4),f=n(1),d=r(f),l=n(3),p=r(l),h="Learn more about defining stores: https://github.com/HubSpot/general-store#create-a-store",y=function(){function e(){i(this,e),this._facade=null,this._getter=null,this._responses={}}return s(e,[{key:"defineGet",value:function(e){return d.default(!this.isRegistered(),"StoreDefinition.defineGet: this store definition cannot be modified because is has already been registered with a dispatcher. %s",h),d.default("function"==typeof e,'StoreDefinition.defineGet: expected getter to be a function but got "%s" instead. %s',e,h),this._getter=e,this}},{key:"defineResponseTo",value:function(e,t){var n=this;return d.default(!this.isRegistered(),"StoreDefinition.defineResponseTo: this store definition cannot be modified because is has already been registered with a dispatcher. %s",h),[].concat(e).forEach(function(e){return n._setResponse(e,t)}),this}},{key:"isRegistered",value:function(){return this._facade instanceof p.default}},{key:"register",value:function(e){e=e||a.default.get(),d.default(null!==e&&"object"==typeof e,"StoreDefinition.register: you haven't provide a dispatcher instance. You can pass an instance to GeneralStore.define().register(dispatcher) or use GeneralStore.DispatcherInstance.set(dispatcher) to set a global instance. https://github.com/HubSpot/general-store#default-dispatcher-instance"),d.default(c.isDispatcher(e),'StoreDefinition.register: Expected dispatcher to be an object with a register method, and an unregister method but got "%s". Learn more about the dispatcher interface: https://github.com/HubSpot/general-store#dispatcher-interface',e),d.default("function"==typeof this._getter,"StoreDefinition.register: a store cannot be registered without a getter. Use GeneralStore.define().defineGet(getter) to define a getter. %s",h);var t=this._facade||new p.default(this._getter||o,this._responses,e);return null===this._facade&&(this._facade=t),t}},{key:"_setResponse",value:function(e,t){d.default("string"==typeof e,'StoreDefinition.defineResponseTo: expected actionType to be a string but got "%s" instead. %s',e,h),d.default(!this._responses.hasOwnProperty(e),'StoreDefinition.defineResponseTo: conflicting resposes for actionType "%s". Only one response can be defined per actionType per Store. %s',e,h),d.default("function"==typeof t,'StoreDefinition.defineResponseTo: expected response to be a function but got "%s" instead. %s',t),this._responses[e]=t}}]),e}();t.default=y,e.exports=t.default},function(e,t){"use strict";function n(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return"function"==typeof e.equals&&"function"==typeof t.equals&&e.equals(t)?!0:!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}}])});