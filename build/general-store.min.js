!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.GeneralStore=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){var StoreDefinition=_dereq_(13),GeneralStore={define:function(){return new StoreDefinition},DispatcherInstance:_dereq_(2),StoreDependencyMixin:_dereq_(7)};module.exports=GeneralStore},{13:13,2:2,7:7}],2:[function(_dereq_,module,exports){var DispatcherInterface=_dereq_(3),invariant=_dereq_(6),instance=null,DispatcherInstance={get:function(){return instance},set:function(e){invariant(DispatcherInterface.isDispatcher(e)),instance=e}};module.exports=DispatcherInstance},{3:3,6:6}],3:[function(_dereq_,module,exports){var DispatcherInterface={isDispatcher:function(e){return"object"==typeof e&&"function"==typeof e.register&&"function"==typeof e.unregister},isPayload:function(e){return null!==e&&"object"==typeof e&&"string"==typeof e.actionType}};module.exports=DispatcherInterface},{}],4:[function(_dereq_,module,exports){function Event(){"use strict";this.$Event_handlers={}}var EventHandler=_dereq_(5),uniqueID=_dereq_(15);Event.prototype.addHandler=function(e){"use strict";var t=uniqueID();return this.$Event_handlers[t]=e,new EventHandler(this,t)},Event.prototype.remove=function(){"use strict";return this.$Event_handlers={},this},Event.prototype.removeHandler=function(e){"use strict";return delete this.$Event_handlers[e],this},Event.prototype.$Event_runHandler=function(e){"use strict";this.$Event_handlers.hasOwnProperty(e)&&this.$Event_handlers[e].call()},Event.prototype.runHandlers=function(){"use strict";return Object.keys(this.$Event_handlers).forEach(this.$Event_runHandler.bind(this)),this},Event.runMultiple=function(e){e.forEach(function(e){return e.runHandlers()})},module.exports=Event},{15:15,5:5}],5:[function(_dereq_,module,exports){function EventHandler(e,n){"use strict";this.$EventHandler_key=n,this.$EventHandler_instance=e}EventHandler.prototype.remove=function(){"use strict";null!==this.$EventHandler_instance&&void 0!==this.$EventHandler_instance&&(this.$EventHandler_instance.removeHandler(this.$EventHandler_key),this.$EventHandler_instance=null)},module.exports=EventHandler},{}],6:[function(_dereq_,module,exports){"use strict";var invariant=function(e,n,i,r,o,t,a,d){if(!e){var f;throw f=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.")}};module.exports=invariant},{}],7:[function(_dereq_,module,exports){function StoreDependencyMixin(e){var t=(Object.keys(e),!1);return{componentWillMount:function(){t&&setupHandlers(this)},componentWillReceiveProps:function(e){t&&hasPropsChanged(this.props,e)&&this.setState(getDependencyState(this,e,this.state,null))},componentWillUnmount:function(){t&&cleanupHandlers(this)},componentDidUpdate:function(e,n){t&&hasStateChanged(dependencies(this),n,this.state)&&this.setState(getDependencyState(this,this.props,this.state,null))},getInitialState:function(){return t=!stores(this).length,applyDependencies(this,e),getDependencyState(this,this.props,this.state,Object.keys(e))}}}var $__0=(_dereq_(14),_dereq_(8)),dependencies=$__0.dependencies,stores=$__0.stores,$__1=_dereq_(9),cleanupHandlers=$__1.cleanupHandlers,setupHandlers=$__1.setupHandlers,$__2=_dereq_(10),applyDependencies=$__2.applyDependencies,$__3=_dereq_(11),getDependencyState=$__3.getDependencyState,$__4=_dereq_(12),hasPropsChanged=$__4.hasPropsChanged,hasStateChanged=$__4.hasStateChanged;module.exports=StoreDependencyMixin},{10:10,11:11,12:12,14:14,8:8,9:9}],8:[function(_dereq_,module,exports){function getKey(e,n,r){return r.hasOwnProperty(e)||(r[e]=n),r[e]}var DEPENDENCIES_KEY=(_dereq_(5),_dereq_(14),"__StoreDependencyMixin-dependencies"),HANDLERS_KEY="__StoreDependencyMixin-eventHandlers",QUEUE_KEY="__StoreDependencyMixin-queue",STORES_KEY="__StoreDependencyMixin-stores",STORE_FIELDS_KEY="__StoreDependencyMixin-storeFields",StoreDependencyMixinFields={dependencies:function(e){return getKey(DEPENDENCIES_KEY,{},e)},handlers:function(e){return getKey(HANDLERS_KEY,[],e)},queue:function(e){return getKey(QUEUE_KEY,{},e)},stores:function(e){return getKey(STORES_KEY,[],e)},storeFields:function(e){return getKey(STORE_FIELDS_KEY,{},e)}};module.exports=StoreDependencyMixinFields},{14:14,5:5}],9:[function(_dereq_,module,exports){function flushQueue(e){var n=dependencies(e),r=queue(e),t={};Object.keys(r).forEach(function(s){var o=n[s];t[s]=o.deref(e.props,e.state,o.stores),delete r[s]}),e.setState(t)}function waitForOtherStores(e,n){var r=stores(e);r.forEach(function(e){var r=e.getDispatcher();e.getID()!==n&&r.isDispatching()&&r.waitFor([e.getDispatchToken()])})}function handleStoreChange(e,n){var r=queue(e),t=0===Object.keys(r).length;storeFields(e)[n].forEach(function(e){r.hasOwnProperty(e)||(r[e]=!0)}),t&&(waitForOtherStores(e,n),flushQueue(e))}var $__0=_dereq_(8),dependencies=$__0.dependencies,handlers=$__0.handlers,queue=$__0.queue,storeFields=$__0.storeFields,stores=$__0.stores,StoreDependencyMixinHandlers={cleanupHandlers:function(e){for(var n=handlers(e);n.length;)n.pop().remove()},setupHandlers:function(e){var n=handlers(e),r=stores(e);r.forEach(function(r){n.push(r.addOnChange(handleStoreChange.bind(null,e,r.getID())))})}};module.exports=StoreDependencyMixinHandlers},{8:8}],10:[function(_dereq_,module,exports){function defaultDeref(e,r,n){return n[0].get()}var StoreFacade=_dereq_(14),invariant=_dereq_(6),$__0=_dereq_(8),dependencies=$__0.dependencies,storeFields=$__0.storeFields,stores=$__0.stores,StoreDependencyMixinInitialize={applyDependencies:function(e,r){var n=dependencies(e),i=storeFields(e),t=stores(e);Object.keys(r).forEach(function(e){var s,a=r[e];a instanceof StoreFacade?(s=[a],invariant(!n.hasOwnProperty(e)),n[e]={deref:defaultDeref,stores:s}):(s=a.stores,n[e]=a),s.forEach(function(r){var n=r.getID();i.hasOwnProperty(n)||(i[n]=[],t.push(r)),i[n].push(e)})})}};module.exports=StoreDependencyMixinInitialize},{14:14,6:6,8:8}],11:[function(_dereq_,module,exports){var $__0=_dereq_(8),dependencies=$__0.dependencies,StoreDependencyMixinState={getDependencyState:function(e,n,t,r){var d=dependencies(e);r=r||Object.keys(d);var i={};return r.forEach(function(e){var r=d[e],c=r.deref,o=r.stores;i[e]=c(n,t,o)}),i}};module.exports=StoreDependencyMixinState},{8:8}],12:[function(_dereq_,module,exports){function compareKey(n,r,e){return compare(r[n],e[n])}function shallowEqual(n,r,e){if(r===e)return!0;var o;for(o in r)if(r.hasOwnProperty(o)&&(!e.hasOwnProperty(o)||!n(o,r,e)))return!1;for(o in e)if(e.hasOwnProperty(o)&&!r.hasOwnProperty(o))return!1;return!0}var compare=window.Immutable&&"function"==typeof window.Immutable.is?window.Immutable.is:function(n,r){return n===r},StoreDependencyMixinTransitions={hasPropsChanged:function(n,r){return!shallowEqual(compareKey,n,r)},hasStateChanged:function(n,r,e){return!shallowEqual(function(r,e,o){return n.hasOwnProperty(r)||compare(e[r],o[r])},r,e)}};module.exports=StoreDependencyMixinTransitions},{}],13:[function(_dereq_,module,exports){function emptyGetter(){return null}function StoreDefinition(){"use strict";this.$StoreDefinition_facade=null,this.$StoreDefinition_getter=null,this.$StoreDefinition_responses={}}var DispatcherInstance=_dereq_(2),DispatcherInterface=_dereq_(3),StoreFacade=_dereq_(14),invariant=_dereq_(6);StoreDefinition.prototype.defineGet=function(t){"use strict";return invariant(!this.isRegistered()),invariant("function"==typeof t),this.$StoreDefinition_getter=t,this},StoreDefinition.prototype.defineResponseTo=function(t,e){"use strict";return invariant(!this.isRegistered()),[].concat(t).forEach(function(t){return this.$StoreDefinition_setResponse(t,e)}.bind(this)),this},StoreDefinition.prototype.isRegistered=function(){"use strict";return this.$StoreDefinition_facade instanceof StoreFacade},StoreDefinition.prototype.register=function(t){"use strict";t=t||DispatcherInstance.get(),invariant("object"==typeof t),invariant(DispatcherInterface.isDispatcher(t)),invariant("function"==typeof this.$StoreDefinition_getter);var e=this.$StoreDefinition_facade||new StoreFacade(this.$StoreDefinition_getter||emptyGetter,this.$StoreDefinition_responses,t);return null===this.$StoreDefinition_facade&&(this.$StoreDefinition_facade=e),e},StoreDefinition.prototype.$StoreDefinition_setResponse=function(t,e){"use strict";invariant("string"==typeof t),invariant(!this.$StoreDefinition_responses.hasOwnProperty(t)),invariant("function"==typeof e),this.$StoreDefinition_responses[t]=e},module.exports=StoreDefinition},{14:14,2:2,3:3,6:6}],14:[function(_dereq_,module,exports){function getNull(){return null}function StoreFacade(e,t,r){"use strict";this.$StoreFacade_dispatcher=r,this.$StoreFacade_getter=e,this.$StoreFacade_responses=t,this.$StoreFacade_event=new Event,this.$StoreFacade_uid=uniqueID(),this.$StoreFacade_dispatchToken=this.$StoreFacade_dispatcher.register(this.$StoreFacade_handleDispatch.bind(this))}var Event=(_dereq_(3),_dereq_(4)),uniqueID=(_dereq_(5),_dereq_(15)),invariant=_dereq_(6);StoreFacade.prototype.addOnChange=function(e){"use strict";return invariant("function"==typeof e),this.$StoreFacade_event.addHandler(e)},StoreFacade.prototype.get=function(){"use strict";for(var e=[],t=0,r=arguments.length;r>t;t++)e.push(arguments[t]);return this.$StoreFacade_getter.apply(null,e)},StoreFacade.prototype.getDispatcher=function(){"use strict";return this.$StoreFacade_dispatcher},StoreFacade.prototype.getDispatchToken=function(){"use strict";return this.$StoreFacade_dispatchToken},StoreFacade.prototype.getID=function(){"use strict";return this.$StoreFacade_uid},StoreFacade.prototype.$StoreFacade_handleDispatch=function(e){"use strict";this.$StoreFacade_responses.hasOwnProperty(e.actionType)&&(this.$StoreFacade_responses[e.actionType](e.data,e.actionType,e),this.triggerChange())},StoreFacade.prototype.remove=function(){"use strict";this.$StoreFacade_dispatcher.unregister(this.getDispatchToken()),this.$StoreFacade_event.remove(),this.$StoreFacade_getter=getNull,this.$StoreFacade_responses={}},StoreFacade.prototype.triggerChange=function(){"use strict";return this.$StoreFacade_event.runHandlers(),this},module.exports=StoreFacade},{15:15,3:3,4:4,5:5,6:6}],15:[function(_dereq_,module,exports){function uid(){return nextUid++}var nextUid=0;module.exports=uid},{}]},{},[1])(1)});